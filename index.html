
<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SayaJove Nadi Astrology</title>
    <style>
        :root { --primary: #1a237e; --accent: #ffd600; --bg: #f5f5f5; --line: #333; }
        body { font-family: sans-serif; background: var(--bg); padding: 10px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .chart-grid { display: grid; grid-template-columns: repeat(4, 1fr); border: 2px solid var(--line); margin: 20px 0; }
        .house { border: 1px solid var(--line); height: 80px; padding: 5px; font-size: 11px; position: relative; background: #fff; }
        .house-id { position: absolute; bottom: 2px; right: 4px; color: #eee; font-weight: bold; }
        .p-tag { color: #0d47a1; font-weight: bold; display: block; margin-bottom: 2px; }
        .center-box { grid-column: 2 / 4; grid-row: 2 / 4; display: flex; align-items: center; justify-content: center; background: #f8f9fa; border: 1px solid var(--line); text-align: center; font-weight: bold; color: var(--primary); font-size: 14px; }
        .cat-title { background: #1a237e; color: white; padding: 8px; border-radius: 5px; margin-top: 15px; font-weight: bold; }
        .res-card { border-left: 5px solid var(--accent); background: #fffde7; padding: 12px; margin: 8px 0; border-radius: 4px; font-size: 14px; line-height: 1.6; }
        button { width: 100%; background: #1b5e20; color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; font-size: 16px; margin-top: 10px; font-weight: bold; }
        button:hover { background: #0d3d10; }
        input { padding: 10px; border: 1px solid #ccc; border-radius: 5px; width: 44%; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="text-align:center; color:var(--primary);">SayaJove နဒီနက္ခတ်ဗေဒင်</h2>
    
    <div style="text-align:center; margin-bottom: 20px;">
        <input type="date" id="dob" value="1985-11-08">
        <input type="time" id="tob" value="15:03">
        <button onclick="calculateNadi()">ဇာတာတွက်ချက်မည်</button>
    </div>

    <div class="chart-grid" id="main-chart">
        <div class="house" id="h11"><div class="house-id">12</div></div>
        <div class="house" id="h0"><div class="house-id">1</div></div>
        <div class="house" id="h1"><div class="house-id">2</div></div>
        <div class="house" id="h2"><div class="house-id">3</div></div>
        <div class="house" id="h10"><div class="house-id">11</div></div>
        <div class="center-box">နဒီနက္ခတ်ဗေဒင်<br>Master System</div>
        <div class="house" id="h3"><div class="house-id">4</div></div>
        <div class="house" id="h9"><div class="house-id">10</div></div>
        <div class="house" id="h4"><div class="house-id">5</div></div>
        <div class="house" id="h8"><div class="house-id">9</div></div>
        <div class="house" id="h7"><div class="house-id">8</div></div>
        <div class="house" id="h6"><div class="house-id">7</div></div>
        <div class="house" id="h5"><div class="house-id">6</div></div>
    </div>
    
    <div id="result-area"></div>
</div>

<script>
// အိမ်ရှင်များ သတ်မှတ်ချက်
const owners = { Sun:[4], Moon:[3], Mars:[0,7], Mercury:[2,5], Jupiter:[8,11], Venus:[1,6], Saturn:[9,10] };

async function calculateNadi() {
    const dob = document.getElementById('dob').value;
    const tob = document.getElementById('tob').value;
    const resArea = document.getElementById('result-area');
    resArea.innerHTML = "<p style='text-align:center;'>တွက်ချက်နေပါသည်...</p>";

    try {
        const response = await fetch(`/api/calc?dob=${dob}&tob=${tob}`);
        const data = await response.json();
        
        if (data.error) throw new Error(data.error);

        // ဇာတာခွင် သန့်ရှင်းရေးလုပ်
        for(let i=0; i<12; i++) {
            document.getElementById(`h${i}`).innerHTML = `<div class="house-id">${i+1}</div>`;
        }

        const pAbbr = {Sun:'Su', Moon:'Mo', Mars:'Ma', Mercury:'Me', Jupiter:'Ju', Venus:'Ve', Saturn:'Sa', Rahu:'Ra', Ketu:'Ke', Ascendant:'As'};
        
        // ဂြိုဟ်များကို ဇာတာခွင်ထဲ ထည့်ခြင်း
        Object.entries(data.positions).forEach(([p, deg]) => {
            const sign = Math.floor(deg / 30);
            if(document.getElementById(`h${sign}`)) {
                document.getElementById(`h${sign}`).innerHTML += `<span class="p-tag">${pAbbr[p] || p} ${Math.floor(deg%30)}°</span>`;
            }
        });

        // ဟောချက် Logic များအား ခေါ်ယူခြင်း
        runNadiLogic(data.positions);

    } catch(e) {
        resArea.innerHTML = "<div class='res-card' style='color:red;'>Error: " + e.message + "</div>";
    }
}

function runNadiLogic(pos) {
    let resultHTML = "";
    let chart = {};

    // ဂြိုဟ်တည်နေရာများကို Object ထဲသို့ ပြောင်းခြင်း
    Object.entries(pos).forEach(([p, deg]) => {
        chart[p] = { house: Math.floor(deg / 30), degree: deg % 30 };
    });

    
    // နဒီအမြင် (၁၊ ၅၊ ၉၊ ၃၊ ၇၊ ၁၁) စစ်ဆေးခြင်း
    const isAspect = (p1, p2) => {
        if (!chart[p1] || !chart[p2]) return false;
        let diff = (chart[p2].house - chart[p1].house + 12) % 12;
        // နဒီစနစ်အရ အမြင်များ
        return [0, 4, 8, 2, 6, 10].includes(diff);
    };


        

    
    // အိမ်ဖလှယ်ခြင်း (Parivartana) စစ်ဆေးခြင်း
    const isInterchange = (p1, p2) => {
        if (!chart[p1] || !chart[p2]) return false;
        return owners[p1]?.includes(chart[p2].house) && owners[p2]?.includes(chart[p1].house);
    };

    const dignityTable = {
    'Sun':     { exalt: 0,  debilit: 6  }, // မိဿ ဥုစ်၊ တူ နိစ်
    'Moon':    { exalt: 1,  debilit: 7  }, // ပြိဿ ဥုစ်၊ ဗြိစ္ဆာ နိစ်
    'Mars':    { exalt: 9,  debilit: 3  }, // မကာရ ဥုစ်၊ ကရကဋ် နိစ်
    'Mercury': { exalt: 5,  debilit: 11 }, // ကန် ဥုစ်၊ မိန် နိစ်
    'Jupiter': { exalt: 3,  debilit: 9  }, // ကရကဋ် ဥုစ် (Index 3)၊ မကာရ နိစ် (Index 9)
    'Venus':   { exalt: 11, debilit: 5  }, // မိန် ဥုစ်၊ ကန် နိစ်
    'Saturn':  { exalt: 6,  debilit: 0  }  // တူ ဥုစ်၊ မိဿ နိစ်
};

const getDignity = (planet) => {
    // ဇာတာထဲမှာ ဂြိုဟ်ရှိမရှိ အရင်စစ်ပါ
    if (!chart || !chart[planet]) return "NORMAL";
    
    // ဂြိုဟ်ရောက်နေတဲ့ အိမ်နံပါတ်ကို ယူပါ (ပုံထဲကအတိုင်းဆို Ju က 3 ဖြစ်နေရပါမယ်)
    let currentHouse = chart[planet].house; 
    let data = dignityTable[planet];

    if (currentHouse === data.exalt) return "EXALT";
    if (currentHouse === data.debilit) return "DEBILIT";
    
    return "NORMAL";
};
const getDignity = (planet) => {
    if (!chart || !chart[planet]) return "NONE";
    let currentHouse = chart[planet].house;
    let data = dignityTable[planet];

    if (currentHouse === data.exalt) return "EXALT";
    if (currentHouse === data.debilit) return "DEBILIT";
    
    // မိမိအိမ် (Own House) စစ်ဆေးခြင်း
    const owners = {
        'Sun': [4], 'Moon': [3], 'Mars': [0, 7], 'Mercury': [2, 5],
        'Jupiter': [8, 11], 'Venus': [1, 6], 'Saturn': [9, 10]
    };
    if (owners[planet] && owners[planet].includes(currentHouse)) return "OWN";

    return "NORMAL";
};
    
const isSameHouse = (p1, p2) => {
    if (!chart[p1] || !chart[p2]) return false;
    return chart[p1].house === chart[p2].house;
};

    
    // --- ဟောချက်များ စုစည်းမှု (ဆရာကြီး ဤနေရာတွင် စာသားများ ထပ်တိုးနိုင်ပါသည်) ---
    const effects = [
        { cat: "family", check: () => isAspect('Moon', 'Rahu'), text: "<b>တနင်္လာ+ရာဟု:</b> မိခင်ဖြစ်သူမှာ ဇာတာရှင်မွေးစတွင် ကျန်းမာရေး အားနည်းတတ်ခြင်း သို့မဟုတ် စိတ်သောက ရောက်တတ်သည်။" },
        { cat: "career", check: () => isAspect('Saturn', 'Ketu'), text: "<b>စနေ+ကိတ်:</b> အလုပ်အကိုင်တွင် ရုတ်တရက် အပြောင်းအလဲများ သို့မဟုတ် ဝိညာဉ်ရေးရာနှင့် ပတ်သက်သော အလုပ်များ အကျိုးပေးမည်။" },
        { cat: "fortune", check: () => isAspect('Jupiter', 'Venus') && isAspect('Jupiter', 'Mercury'), text: "<b>ဓနသိဒ္ဓိယောဂ:</b> ငွေကြေးကံ အလွန်ကောင်းမွန်ပြီး ပညာရှိများ၏ အကူအညီ ရရှိမည်။" },
        { cat: "marriage", check: () => isAspect('Venus', 'Ketu'), text: "<b>သောကြာ+ကိတ်:</b> အိမ်ထောင်ဖက်မှာ ဘာသာတရား ကိုင်းရှိုင်းသူ ဖြစ်တတ်သည်။" },
        { cat: "career", check: () => isInterchange('Mars', 'Mercury'), text: "<b>အင်္ဂါ+ဗုဒ္ဓဟူး (အိမ်ဖလှယ်ခြင်း):</b> စကားပြောဆိုရာတွင် အလွန်ထက်မြက်ပြီး နည်းပညာ သို့မဟုတ် စာရင်းအင်းပညာဖြင့် အောင်မြင်မည်။" },
        { cat: "fortune", check: () => isAspect('Sun', 'Jupiter'), text: "<b>တနင်္ဂနွေ+ကြာသပတေး:</b> အစိုးရ သို့မဟုတ် အကြီးအကဲများ၏ အထောက်အပံ့ ရရှိမည်။ ဂုဏ်သိက္ခာကြီးမားသူဖြစ်မည်။" },
            
        // --- ကံကြမ္မာနှင့် အထွေထွေ ---
        { cat: "fortune", check: () => isAspect('Jupiter', 'Venus'), text: "<b>ကြာသပတေး+သောကြာ:</b> ကြီးပွားချမ်းသာမည့် ဇာတာရှင်ဖြစ်သည်။ အိမ်၊ ခြံ၊ မြေ ကံကောင်းတတ်သည်။" },
        { cat: "fortune", check: () => isAspect('Jupiter', 'Sun'), text: "<b>ကြာသပတေး+တနင်္ဂနွေ:</b> ဂုဏ်သိက္ခာကြီးမားသူဖြစ်မည်။ အစိုးရနှင့် ပတ်သက်သော အကျိုးအမြတ်များ ရရှိတတ်သည်။" },
        { cat: "fortune", check: () => isAspect('Jupiter', 'Moon'), text: "<b>ကြာသပတေး+တနင်္လာ:</b> စိတ်သဘောထား နူးညံ့ပြီး ခရီးသွားခြင်းဖြင့် ကံကောင်းတတ်သည်။ အပြောင်းအလဲများက ကောင်းကျိုးပေးမည်။" },
        { cat: "fortune", check: () => isAspect('Mercury', 'Venus'), text: "<b>ဗုဒ္ဓဟူး+သောကြာ:</b> ပညာဉာဏ် ထက်မြက်ပြီး အနုပညာ သို့မဟုတ် စီးပွားရေးတွင် အောင်မြင်မည်။ စကားပြော ကောင်းသူဖြစ်သည်။" },

        // --- အလုပ်အကိုင်နှင့် စီးပွားရေး ---
        { cat: "career", check: () => isAspect('Saturn', 'Jupiter'), text: "<b>စနေ+ကြာသပတေး:</b> အလုပ်အကိုင်တွင် ဆရာတစ်ဆူ ဖြစ်တတ်သည်။ တာဝန်ကြီးသော ရာထူးများ ရရှိမည်။" },
        { cat: "career", check: () => isAspect('Saturn', 'Sun'), text: "<b>စနေ+တနင်္ဂနွေ:</b> အလုပ်တွင် ဖခင် သို့မဟုတ် အထက်လူကြီးနှင့် သဘောထား ကွဲလွဲတတ်သော်လည်း အောင်မြင်မှု ရမည်။" },
        { cat: "career", check: () => isAspect('Saturn', 'Mercury'), text: "<b>စနေ+ဗုဒ္ဓဟူး:</b> စာရင်းအင်း၊ ရှေ့နေ သို့မဟုတ် ကုန်သွယ်မှုတွင် ထူးချွန်မည်။ အသေးစိတ် လုပ်ကိုင်ရသောအလုပ်များဖြင့် အောင်မြင်မည်။" },
        { cat: "career", check: () => isAspect('Saturn', 'Mars'), text: "<b>စနေ+အင်္ဂါ:</b> နည်းပညာ၊ စက်မှု သို့မဟုတ် ဆောက်လုပ်ရေး လုပ်ငန်းများဖြင့် ကြီးပွားမည်။ အလုပ်တွင် ပင်ပန်းသလောက် အကျိုးခံစားရမည်။" },
        { cat: "career", check: () => isAspect('Saturn', 'Rahu'), text: "<b>စနေ+ရာဟု:</b> နိုင်ငံခြားနှင့် ဆက်သွယ်သော အလုပ်များ သို့မဟုတ် ထူးခြားဆန်းပြားသော အလုပ်များဖြင့် အောင်မြင်တတ်သည်။" },

        // --- အိမ်ထောင်ရေးနှင့် လူမှုရေး ---
        { cat: "marriage", check: () => isAspect('Venus', 'Mars'), text: "<b>သောကြာ+အင်္ဂါ:</b> ချစ်သူ/အိမ်ထောင်ဖက်မှာ ရဲရင့်ပြတ်သားသူ ဖြစ်တတ်သည်။ အိမ်ထောင်ရေးတွင် စိတ်အားထက်သန်မှု ရှိမည်။" },
        { cat: "marriage", check: () => isAspect('Venus', 'Jupiter'), text: "<b>သောကြာ+ကြာသပတေး:</b> အိမ်ထောင်ဖက်ကြောင့် ဘဝတက်လမ်း ရရှိမည်။ သာယာပျော်ရွှင်သော အိမ်ထောင်ရေး ဖြစ်မည်။" },
        { cat: "marriage", check: () => isAspect('Venus', 'Ketu'), text: "<b>သောကြာ+ကိတ်:</b> အိမ်ထောင်ရေးတွင် တစ်ခါတစ်ရံ စိတ်ပျက်အားလျော့တတ်သည်။ ဘာသာရေး လိုက်စားသော အိမ်ထောင်ဖက် ရတတ်သည်။" },
        { cat: "marriage", check: () => isAspect('Mars', 'Ketu'), text: "<b>အင်္ဂါ+ကိတ်:</b> အိမ်ထောင်ဖက်နှင့် စကားများတတ်သော်လည်း သံယောဇဉ် ကြီးမားသူများ ဖြစ်ကြမည်။" },

        // --- မိသားစုနှင့် ကျန်းမာရေး ---
        { cat: "family", check: () => isAspect('Sun', 'Mars'), text: "<b>တနင်္ဂနွေ+အင်္ဂါ:</b> ဖခင်သည် စိတ်မြန်သူ၊ ဩဇာရှိသူ ဖြစ်တတ်သည်။ ညီအစ်ကို မောင်နှမများက ကူညီတတ်သည်။" },
        { cat: "family", check: () => isAspect('Moon', 'Rahu'), text: "<b>တနင်္လာ+ရာဟု:</b> မိခင်၏ ကျန်းမာရေးကို အထူးဂရုစိုက်ပါ။ မိသားစုအတွင်း အထင်အမြင်လွဲမှားမှုများ ရှိတတ်သည်။" },
        { cat: "family", check: () => isAspect('Moon', 'Jupiter'), text: "<b>တနင်္လာ+ကြာသပတေး:</b> မိခင်သည် ဘာသာတရား ကိုင်းရှိုင်းသူ ဖြစ်မည်။ မိသားစု၏ ထောက်ပံ့မှုကို ကောင်းစွာ ရရှိမည်။" },
        
        // --- ဝိညာဉ်ရေးနှင့် ထူးခြားသောကံ ---
        { cat: "spiritual", check: () => isAspect('Jupiter', 'Ketu'), text: "<b>ကြာသပတေး+ကိတ်:</b> တရားထူး၊ တရားမြတ်များ ရရှိတတ်သည်။ လောကုတ္တရာ ပညာတွင် အလွန်ထူးချွန်မည်။" },
        { cat: "spiritual", check: () => isAspect('Sun', 'Ketu'), text: "<b>တနင်္ဂနွေ+ကိတ်:</b> ဘိုးတော်၊ နတ်မင်းကြီးများ၏ စောင့်ရှောက်မှု ခံရတတ်သည်။ အိပ်မက် ထူးခြားတတ်သည်။" },
        { cat: "spiritual", check: () => isAspect('Mercury', 'Ketu'), text: "<b>ဗုဒ္ဓဟူး+ကိတ်:</b> ဗေဒင်၊ နက္ခတ် သို့မဟုတ် လျှို့ဝှက်ပညာရပ်များကို အလိုလို သိမြင်တတ်သော ဉာဏ်ရှိသည်။" },
        { cat: "spiritual", check: () => isAspect('Mars', 'Jupiter'), text: "<b>အင်္ဂါ+ကြာသပတေး:</b> တရားမျှတမှုကို မြတ်နိုးသူဖြစ်မည်။ အမှန်တရားအတွက် ရဲဝံ့စွာ ပြောဆိုတတ်သူဖြစ်သည်။" },

    
        // --- ၁။ ဥုစ် (Exaltation) ဟောချက်များ ---
        { cat: "fortune", check: () => getDignity('Sun') === "EXALT", text: "<b>တနင်္ဂနွေ ဥုစ် (မိဿရာသီ):</b> ဇာတာရှင်သည် နေမင်းကဲ့သို့ ဩဇာတိက္ကမ ကြီးမားသူဖြစ်သည်။ အုပ်ချုပ်မှုစွမ်းရည် အထူးမြင့်မားပြီး အများယုံကြည်အားကိုးထိုက်သော ခေါင်းဆောင်ကောင်း ဖြစ်တတ်သည်။ ဖခင် သို့မဟုတ် အကြီးအကဲများ၏ အထောက်အပံ့ကို အပြည့်အဝရရှိမည်ဖြစ်ကာ အစိုးရနှင့် ပတ်သက်သော ကိစ္စရပ်များတွင် ထူးခြားစွာ အောင်မြင်ကျော်ကြားမည့်သူ ဖြစ်သည်။" },
        { cat: "fortune", check: () => getDignity('Moon') === "EXALT", text: "<b>တနင်္လာ ဥုစ် (ပြိဿရာသီ):</b> စိတ်နှလုံး အလွန်အေးချမ်းပြီး ကြင်နာသနားတတ်သူ ဖြစ်သည်။ စည်းစိမ်ဥစ္စာ ရတနာများနှင့် ပြည့်စုံတတ်ပြီး ဘဝတွင် သက်သောင့်သက်သာ နေထိုင်ရတတ်သည်။ မိခင်၏ မေတ္တာကို အပြည့်အဝရရှိပြီး အမျိုးသမီးများ၏ ကူညီပံ့ပိုးမှုဖြင့် ဘဝတက်လမ်း ရရှိမည်။ စိတ်ကူးစိတ်သန်း ကောင်းမွန်ပြီး အနုပညာ သို့မဟုတ် လူမှုရေးလုပ်ငန်းများတွင် ထင်ရှားမည်။" },
        { cat: "career", check: () => getDignity('Mars') === "EXALT", text: "<b>အင်္ဂါ ဥုစ် (မကာရရာသီ):</b> ရဲရင့်ပြတ်သားသော သတ္တိရှိသူဖြစ်သည်။ စိန်ခေါ်မှုများကို မကြောက်မရွံ့ ရင်ဆိုင်နိုင်ပြီး နည်းပညာ၊ စစ်ဘက်၊ သို့မဟုတ် အင်ဂျင်နီယာပိုင်းဆိုင်ရာများတွင် ထိပ်တန်းသို့ ရောက်ရှိတတ်သည်။ လုပ်ငန်းခွင်တွင် ဇွဲလုံ့လ အလွန်ကြီးမားပြီး ပြိုင်ဘက်များကို အောင်နိုင်မည်။ ပိုင်ဆိုင်မှု ဓနဥစ္စာနှင့် အိမ်၊ ခြံ၊ မြေ ကံထူးသူ ဖြစ်သည်။" },
        { cat: "spiritual", check: () => getDignity('Mercury') === "EXALT", text: "<b>ဗုဒ္ဓဟူး ဥုစ် (ကန်ရာသီ):</b> ဉာဏ်ပညာ အလွန်ထက်မြက်ပြီး ဆင်ခြင်တုံတရားနှင့် ပြည့်စုံသူဖြစ်သည်။ စာပေ၊ စာရင်းအင်း၊ ကုန်သွယ်မှုနှင့် စကားပြောစွမ်းရည်တို့တွင် ပြိုင်ဘက်ကင်းမည်။ ခွဲခြမ်းစိတ်ဖြာနိုင်စွမ်း မြင့်မားသဖြင့် ပညာရှင်အဆင့်သို့ ရောက်ရှိတတ်သည်။ စာချုပ်စာတမ်းနှင့် အပြောအဆို ကိစ္စရပ်များတွင် အမှားအယွင်းမရှိ အောင်မြင်မည့်သူ ဖြစ်သည်။" },
        { cat: "fortune", check: () => getDignity('Jupiter') === "EXALT", text: "<b>ကြာသပတေး ဥုစ် (ကရကဋ်ရာသီ):</b> ကုသိုလ်ကံ အလွန်ကြီးမားသော ဇာတာရှင်ဖြစ်သည်။ ဘာသာတရား ကိုင်းရှိုင်းပြီး ကိုယ်ကျင့်တရား ကောင်းမွန်သဖြင့် အများ၏ ကြည်ညိုလေးစားမှုကို ရရှိမည်။ ပညာဗဟုသုတ ကြွယ်ဝပြီး သူတစ်ပါးကို လမ်းညွှန်ပြသနိုင်သော ဆရာကောင်းတစ်ဦး ဖြစ်တတ်သည်။ သားသမီးရတနာ ထွန်းကားခြင်းနှင့် ဘဝနှောင်းပိုင်းတွင် အလွန်ချမ်းသာသုခ ရရှိခြင်းတို့ကို ကြုံရမည်။" },
        { cat: "marriage", check: () => getDignity('Venus') === "EXALT", text: "<b>သောကြာ ဥုစ် (မိန်ရာသီ):</b> မေတ္တာတရား ကြီးမားပြီး ဆွဲဆောင်မှုရှိသော ကိုယ်ရည်ကိုယ်သွေး ရှိသူဖြစ်သည်။ အချစ်ရေးနှင့် အိမ်ထောင်ရေးတွင် အလွန်ကံကောင်းတတ်ပြီး အေးချမ်းသာယာသော ဘဝကို ပိုင်ဆိုင်ရမည်။ အနုပညာ အာရုံခံစားမှု မြင့်မားပြီး ဇိမ်ခံပစ္စည်း၊ အဝတ်အထည်နှင့် အသုံးအဆောင်များတွင် ကံထူးတတ်သည်။ ငွေကြေးဓန မပြတ်မလပ် စီးဝင်နေမည့် ဇာတာရှင်ဖြစ်သည်။" },
        { cat: "career", check: () => getDignity('Saturn') === "EXALT", text: "<b>စနေ ဥုစ် (တူရာသီ):</b> တရားမျှတမှုကို မြတ်နိုးပြီး စနစ်တကျ လုပ်ကိုင်တတ်သူဖြစ်သည်။ စီမံခန့်ခွဲမှုစွမ်းရည် မြင့်မားပြီး အောက်လက်ငယ်သားများ သို့မဟုတ် လူထု၏ ထောက်ခံမှုကို ရရှိတတ်သည်။ ရေရှည်စီမံကိန်းများတွင် အောင်မြင်မည်ဖြစ်ပြီး အိုဇာတာ အလွန်ကောင်းမည့်သူ ဖြစ်သည်။ နိုင်ငံရေး သို့မဟုတ် လူမှုထုအခြေပြု လုပ်ငန်းများတွင် ထိပ်တန်းခေါင်းဆောင် ဖြစ်လာတတ်သည်။" },

        // --- ၂။ နိစ် (Debilitation) ဟောချက်များ ---
        { cat: "health", check: () => getDignity('Sun') === "DEBILIT", text: "<b>တနင်္ဂနွေ နိစ် (တူရာသီ):</b> မိမိကိုယ်ကိုယ် ယုံကြည်မှု လျော့နည်းတတ်ပြီး ဆုံးဖြတ်ချက်များ ဝေဝါးနေတတ်သည်။ အများကြားတွင် မျက်နှာငယ်ရခြင်း၊ ဂုဏ်သိက္ခာ ထိခိုက်ရခြင်းများ ကြုံရတတ်သည်။ ဖခင်နှင့် ပတ်သက်၍ ပူပန်ရတတ်သလို၊ မျက်စိ၊ အရိုးနှင့် နှလုံးကျန်းမာရေးကို အထူးဂရုစိုက်သင့်သည်။ အာဏာပိုင်များနှင့် ထိပ်တိုက်တွေ့ခြင်းကို ရှောင်ကြဉ်ပါ။" },
        { cat: "health", check: () => getDignity('Moon') === "DEBILIT", text: "<b>တနင်္လာ နိစ် (ဗြိစ္ဆာရာသီ):</b> စိတ်ပိုင်းဆိုင်ရာ အလွန်ခံစားလွယ်ပြီး စိတ်ဓာတ်ကျလွယ်တတ်သည်။ မလိုအပ်ဘဲ စိုးရိမ်သောကများနေတတ်ကာ စိတ်မငြိမ်မသက် ဖြစ်တတ်သည်။ မိခင်၏ ကျန်းမာရေး သို့မဟုတ် မိခင်နှင့် ပတ်သက်၍ စိတ်သောက ရောက်ရတတ်သည်။ သွေးနှင့် ပတ်သက်သော ရောဂါ သို့မဟုတ် စိတ်ဖိစီးမှုကြောင့် ဖြစ်သော ရောဂါများကို သတိပြုဆင်ခြင်ရန် လိုအပ်သည်။" },
        { cat: "career", check: () => getDignity('Mars') === "DEBILIT", text: "<b>အင်္ဂါ နိစ် (ကရကဋ်ရာသီ):</b> စိတ်အတွင်း၌ ဒေါသကို အပြင်မထုတ်ဘဲ သိမ်းထားတတ်သဖြင့် စိတ်ပင်ပန်းတတ်သည်။ လုပ်ငန်းခွင်တွင် ဇွဲလုံ့လ အားနည်းတတ်ပြီး အလုပ်တစ်ခုကို အဆုံးထိ မလုပ်ဘဲ လက်လျှော့တတ်သည်။ ညီအစ်ကို မောင်နှမများနှင့် ဆက်ဆံရေး အဆင်မပြေမှု ကြုံရတတ်သည်။ မတော်တဆ ထိခိုက်မှုများနှင့် စိတ်လိုက်မာန်ပါ လုပ်ရပ်များကြောင့် ဆုံးရှုံးမှုရှိနိုင်သဖြင့် သတိပြုပါ။" },
        { cat: "spiritual", check: () => getDignity('Mercury') === "DEBILIT", text: "<b>ဗုဒ္ဓဟူး နိစ် (မိန်ရာသီ):</b> သင်ယူမှုပိုင်းတွင် အားနည်းခြင်း သို့မဟုတ် အာရုံစူးစိုက်မှု မရှိခြင်းများ ကြုံရတတ်သည်။ ဆက်သွယ်ပြောဆိုရာတွင် အထင်အမြင်လွဲမှားခြင်း ခံရတတ်ပြီး စာချုပ်စာတမ်း ကိစ္စများတွင် လှည့်ဖြားခံရတတ်သည်။ ဆုံးဖြတ်ချက်များ မှားယွင်းတတ်သဖြင့် အရေးကြီးသော ကိစ္စများကို အလျင်စလို မလုပ်သင့်ပါ။ အာရုံကြောနှင့် ပတ်သက်သော ကျန်းမာရေးကို ဂရုစိုက်ပါ။" },
        { cat: "fortune", check: () => getDignity('Jupiter') === "DEBILIT", text: "<b>ကြာသပတေး နိစ် (မကာရရာသီ):</b> ကံကောင်းခြင်းများ လက်လွတ်သွားတတ်ပြီး အခွင့်အရေးများ ဆုံးရှုံးတတ်သည်။ ငွေကြေးစီမံခန့်ခွဲမှု မှားယွင်းတတ်သဖြင့် အလွဲသုံးစားမှု သို့မဟုတ် အရှုံးပေါ်ခြင်းများ သတိပြုပါ။ သားသမီးကံ အားနည်းခြင်း သို့မဟုတ် သားသမီးအတွက် ပူပန်ရခြင်းမျိုး ရှိတတ်သည်။ ဘာသာရေးနှင့် ကိုယ်ကျင့်တရားပိုင်းတွင် စမ်းသပ်မှုများ ကြုံရတတ်သည်။" },
        { cat: "marriage", check: () => getDignity('Venus') === "DEBILIT", text: "<b>သောကြာ နိစ် (ကန်ရာသီ):</b> အချစ်ရေးနှင့် အိမ်ထောင်ရေးတွင် စိတ်တိုင်းမကျမှုများ၊ အဆင်မပြေမှုများ ကြုံရတတ်သည်။ ငွေကြေးသုံးစွဲမှုတွင် စနစ်တကျ မရှိပါက ဆင်းရဲဒုက္ခ ရောက်တတ်သည်။ အပျော်အပါးနှင့် အသုံးအဆောင်များအတွက် အပိုကုန်ကျစရိတ်များ များနေတတ်သည်။ အပေါင်းအသင်း မှားတတ်သဖြင့် သတိပြုပါ။ အမျိုးသမီးများကြောင့် စိတ်သောက ရောက်ရတတ်သည်။" },
        { cat: "career", check: () => getDignity('Saturn') === "DEBILIT", text: "<b>စနေ နိစ် (မိဿရာသီ):</b> အလုပ်အကိုင်တွင် တာဝန်ယူရမှုများသလောက် အရာမထင်ဘဲ ပင်ပန်းရတတ်သည်။ အောက်လက်ငယ်သားများ၏ အကူအညီ မရဘဲ တစ်ဦးတည်း ရုန်းကန်ရတတ်သည်။ ဘဝတွင် အတားအဆီးနှင့် ကြန့်ကြာမှုများစွာ ကြုံရတတ်သည်။ ခါး၊ ဒူးနှင့် အကြောပိုင်းဆိုင်ရာ ကျန်းမာရေး ဝေဒနာများကို သတိပြုဆင်ခြင်ရန် လိုအပ်သည်။" },
    

    // ၁။ မိသားစုရေးရာ
    { 
        cat: "family", 
        check: () => isAspect('Moon', 'Rahu'), 
        text: "<b>တနင်္လာ+ရာဟုဆက်သွယ်ချက်:</b> ဇာတာရှင်ကို မွေးစတွင် မိခင်ဖြစ်သူမှာ ထိတ်လန့်ဖွယ်ရာအန္တရာယ် သို့မဟုတ် အောက်လမ်းမကောင်းဆိုးဝါးကြောင့် ဖျားနာတတ်သည်။ တနင်္လာဟာ စိတ်ကိုရည်ညွှန်းပြီး ရာဟုဟာ အမှောင်ကိုကိုယ်စားပြုခြင်းကြောင့် မိခင်ဖြစ်သူမှာ စိတ်လေးလံတာ၊ မပျော်ရွှင်တာမျိုး ဖြစ်တတ်သည်။" 
    },
    
    // ၂။ ရာဟု+တနင်္လာ ပူးခြင်း
    { 
        cat: "special", 
        check: () => isSameHouse('Rahu', 'Moon'), 
        text: "<b>တစ်အိမ်တည်း ၂ လုံးပူးယှဉ်ခြင်း:</b> ရာဟု+တနင်္လာ ပူးယှဉ်နေခြင်းကြောင့် ဇာတာရှင်ကို မွေးဖွားပြီးစကာလတွင် မိခင်ဖြစ်သူမှာ ကြောက်ရွံ့ထိတ်လန့်ဖွယ်ရာ အန္တရာယ်များ သို့မဟုတ် အောက်လမ်းမကောင်းဆိုးဝါး (Evil Spirits) ကြောင့် ပြင်းထန်စွာ ဖျားနာခြင်းမျိုး ကြုံတွေ့ခဲ့ရတတ်သည်။" 
    },

    // ၃။ စနေ+ကိတ် အလုပ်အကိုင်
    { 
        cat: "career", 
        check: () => isAspect('Saturn', 'Ketu'), 
        text: "<b>စနေ+ကိတ် (အလုပ်အကိုင်):</b> အလုပ်အကိုင်တွင် အတားအဆီးများ သို့မဟုတ် ရုတ်တရက် ရပ်တန့်မှုများ ကြုံရတတ်သည်။ ဝိညာဉ်ရေးရာ သို့မဟုတ် အကြံပေးလုပ်ငန်းများက ပို၍ အကျိုးပေးမည်။" 
    },

    // ၄။ ဝိညာဉ်ရေး Yoga (ဂြိုဟ် ၄ လုံးဆက်သွယ်မှု)
    {
        cat: "spiritual",
        check: () => isAspect('Jupiter', 'Mars') && isAspect('Jupiter', 'Rahu') && isAspect('Jupiter', 'Ketu'),
        text: "<b>ထူးခြားသောဝိညာဉ်ရေး Yoga (ကြာသပတေး+အင်္ဂါ+ရာဟု+ကိတ်):</b> ဇာတာရှင်သည် ဘဝတွင် လောကီစည်းစိမ်ထက် လောကုတ္တရာနှင့် ထူးခြားဆန်းပြားသော ပညာရပ်များတွင် ပိုမိုအောင်မြင်တတ်သည်။ ရုတ်တရက် အပြောင်းအလဲများမှတစ်ဆင့် ဝိညာဉ်ရေးရာအဆင့်မြင့်မှုကို ရရှိမည်။"
    },

    // ၅။ ဗုဒ္ဓဟူး+တနင်္ဂနွေ+သောကြာ
    {
        cat: "spiritual",
        check: () => isAspect('Mercury', 'Sun') && isAspect('Mercury', 'Venus'),
        text: "<b>ဗုဒ္ဓဟူး+တနင်္ဂနွေ+သောကြာ:</b> ဉာဏ်ပညာအလွန်မြင့်မားမည်။ ဥပဒေ သို့မဟုတ် အစိုးရနှင့် ပတ်သက်သော အဆင့်မြင့်ပညာရပ်များဖြင့် အောင်မြင်မည်။"
    },

    // ၆။ ကြာသပတေး+စနေ+ကိတ်
    {
        cat: "spiritual",
        check: () => isAspect('Jupiter', 'Saturn') && isAspect('Jupiter', 'Ketu'),
        text: "<b>ကြာသပတေး+စနေ+ကိတ်:</b> ဘဝ၏ နောက်ဆုံးအချိန်တွင် ဘာသာရေး၊ ဝိညာဉ်ရေးရာများဖြင့် အေးချမ်းစွာ ကုန်ဆုံးရမည်။ တရားဓမ္မ၌ ထူးခြားစွာ ပေါက်မြောက်တတ်သည်။"
    },

            
    // ၁။ Political Struggle (စနေ+တနင်္ဂနွေ+ရာဟု+ကိတ်)
    { 
        cat: "career", 
        check: () => isAspect('Saturn', 'Sun') && isAspect('Saturn', 'Rahu') && isAspect('Saturn', 'Ketu'), 
        text: "<b>Political Struggle:</b> အာဏာပိုင်များနှင့် ပတ်သက်၍ အခက်အခဲများ၊ အမှုအခင်းများ သို့မဟုတ် နာမည်ဖျက်ခြင်း ခံရတတ်သည်။ သို့သော် ဝိညာဉ်ရေးရာ အားကိုးမှုနှင့် သည်းခံနိုင်စွမ်းကြောင့် နောက်ဆုံးတွင် အောင်မြင်မှု ပြန်လည်ရရှိမည်။" 
    },

    // ၂။ Blessed with Progeny (တနင်္လာ+သောကြာ+ကြာသပတေး ဥုစ်)
    { 
        cat: "family", 
        check: () => isAspect('Moon', 'Venus') && isAspect('Moon', 'Jupiter') && getDignity('Jupiter') === "EXALT", 
        text: "<b>Blessed with Progeny:</b> သားသမီးကံ အလွန်ကောင်းသည်။ ထွန်းကားလာမည့် သားသမီးများသည် လိမ်မာယဉ်ကျေးရုံသာမက မိဘထက်ပင် ပိုမိုကျော်ကြားမည့်သူများ ဖြစ်လာမည်။" 
    },

    // ၃။ Supreme Consultant (ဗုဒ္ဓဟူး+စနေ+ကြာသပတေး+တနင်္ဂနွေ)
    { 
        cat: "career", 
        check: () => isAspect('Mercury', 'Saturn') && isAspect('Mercury', 'Jupiter') && isAspect('Mercury', 'Sun'), 
        text: "<b>Supreme Consultant:</b> အဆင့်မြင့် အကြံပေးပုဂ္ဂိုလ် သို့မဟုတ် မူဝါဒချမှတ်သူ ဖြစ်မည်။ ရှုပ်ထွေးသော ပြဿနာများကို လွယ်ကူစွာ ဖြေရှင်းနိုင်စွမ်းရှိသဖြင့် အစိုးရနှင့် ကုမ္ပဏီကြီးများက အားကိုးရသူ ဖြစ်လိမ့်မည်။" 
    },

    // ၄။ Accident Warning (အင်္ဂါ+ကိတ်+တနင်္လာ+စနေ)
    { 
        cat: "health", 
        check: () => isAspect('Mars', 'Ketu') && isAspect('Mars', 'Moon') && isAspect('Mars', 'Saturn'), 
        text: "<b>Accident Warning:</b> ခရီးသွားလာရာတွင်လည်းကောင်း၊ စက်ကိရိယာများ ကိုင်တွယ်ရာတွင်လည်းကောင်း အထူးသတိပြုရမည်။ ရုတ်တရက် မတော်တဆမှု သို့မဟုတ် သွေးထွက်သံယို ဖြစ်တတ်သော ကံပါရှိသည်။" 
    },

    // ၅။ Dharma-Karmadhipati Yoga (တနင်္ဂနွေ+တနင်္လာ+အင်္ဂါ+ကြာသပတေး)
    { 
        cat: "fortune", 
        check: () => isAspect('Sun', 'Moon') && isAspect('Sun', 'Mars') && isAspect('Sun', 'Jupiter'), 
        text: "<b>Dharma-Karmadhipati Yoga:</b> အလွန်မြင့်မြတ်သော ယုဂ်ဖြစ်သည်။ ဘဝတွင် မှန်ကန်သော လမ်းကြောင်းပေါ်၌ ရပ်တည်ခြင်းကြောင့် ဘုန်းကံကြီးမားမည်။ လူနတ်အများ၏ ချစ်ခင်လေးစားမှုကို ခံရမည့် ဇာတာရှင်ဖြစ်သည်။" 
    },

    // ၆။ Emotional Hardship (စနေ+တနင်္လာ+သောကြာ နိစ်)
    { 
        cat: "marriage", 
        check: () => isAspect('Saturn', 'Moon') && isAspect('Saturn', 'Venus') && getDignity('Venus') === "DEBILIT", 
        text: "<b>Emotional Hardship:</b> အချစ်ရေး သို့မဟုတ် အိမ်ထောင်ရေးတွင် စိတ်ပျက်အားငယ်စရာများ၊ လှည့်ဖြားခံရမှုများ ကြုံရတတ်သည်။ စိတ်ဓာတ်ကျလွယ်တတ်သဖြင့် သတိပြုရမည်။" 
    },

    // ၇။ Master of Education (ကြာသပတေး+တနင်္ဂနွေ+ဗုဒ္ဓဟူး မိမိအိမ်)
    { 
        cat: "spiritual", 
        check: () => isAspect('Jupiter', 'Sun') && isAspect('Jupiter', 'Mercury') && getDignity('Jupiter') === "OWN", 
        text: "<b>Master of Education:</b> ပညာရေးနယ်ပယ်တွင် ထိပ်တန်းသို့ ရောက်ရှိမည်။ တက္ကသိုလ်အကြီးအကဲ၊ ပညာရှင် သို့မဟုတ် နာမည်ကျော် ဆရာကြီး ဖြစ်လာလိမ့်မည်။" 
    }


    ];

    // ဟောချက်များကို အမျိုးအစားအလိုက် ခွဲထုတ်ပြသခြင်း
    let catNames = { fortune: "ကံကြမ္မာ", career: "အလုပ်အကိုင်", marriage: "အိမ်ထောင်ရေး", family: "မိသားစု", spiritual: "ဝိညာဉ်ရေးရာ" };

    Object.keys(catNames).forEach(c => {
        let filtered = effects.filter(e => e.cat === c && e.check());
        if(filtered.length > 0) {
            resultHTML += `<div class="cat-title">${catNames[c]}</div>`;
            filtered.forEach(f => { 
                resultHTML += `<div class="res-card">${f.text}</div>`; 
            });
        }
    });

    document.getElementById('result-area').innerHTML = resultHTML || "<p style='text-align:center; padding:20px;'>ယခုဇာတာအတွက် ထူးခြားသော နဒီယောဂများ မတွေ့ရှိသေးပါ။</p>";
}
</script>

</body>
</html>
